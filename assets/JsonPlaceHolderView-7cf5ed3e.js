import{_ as h,o as s,c as o,a as r,r as m,w as k,v as S,F as P,b as x,d as w,t as v,e as I,p as C,f as T,g as M,h as J,A as V,i as A,j as f,u as g}from"./index-85a56c2e.js";const F={},L={class:"lds-ripple"},N=r("div",null,null,-1),j=r("div",null,null,-1),D=[N,j];function H(t,n){return s(),o("div",L,D)}const O=h(F,[["render",H]]);const $=t=>(C("data-v-96e7007d"),t=t(),T(),t),B=$(()=>r("label",{for:"titre"},"Titre de l'article:",-1)),z=$(()=>r("label",{for:"content"},"Contenu de l'article :",-1)),K={key:0,type:"submit"},U={key:1,disabled:"",class:"error-message"},q=$(()=>r("br",null,null,-1)),G={__name:"JsonplaceholderForm",emits:["add"],setup(t,{emit:n}){const d=m({}),l=m(""),a=m(""),e=m({isTitleError:!1,isContentError:!1,message:[]}),y=n,b=function(u){u.length<2||u.valueOf().length===0?(e.value.isTitleError=!0,e.value.message.includes("Titre minimum 2 caractères")||(e.value.message=["Titre minimum 2 caractères",...e.value.message])):(e.value.isTitleError=!1,e.value.message.includes("Titre minimum 2 caractères")&&e.value.message.splice(e.value.message.indexOf("Titre minimum 2 caractères"),1))},c=function(u){u.length<2?(e.value.isContentError=!0,e.value.message.includes("Contenu minimum 2 caractères")||(e.value.message=[...e.value.message,"Contenu minimum 2 caractères"])):(e.value.isContentError=!1,e.value.message.includes("Contenu minimum 2 caractères")&&e.value.message.splice(e.value.message.indexOf("Contenu minimum 2 caractères"),1))},p=function(u,i){u===""&&(e.value.message=[...e.value.message,"Titre minimum 2 caractères"],e.value.isTitleError=!0),i===""&&(e.value.message=[...e.value.message,"Contenu minimum 2 caractères"],e.value.isContentError=!0),!e.value.isTitleError&&!e.value.isContentError&&(d.value={title:u,body:i},y("add",d.value),u="",i="")};return(u,i)=>(s(),o("form",{onSubmit:i[4]||(i[4]=I(_=>p(l.value,a.value),["prevent"]))},[B,k(r("input",{type:"text",name:"titre",id:"titre","onUpdate:modelValue":i[0]||(i[0]=_=>l.value=_),placeholder:"Saisissez le titre",onKeyup:i[1]||(i[1]=_=>b(l.value))},null,544),[[S,l.value]]),z,k(r("textarea",{id:"content",name:"content",rows:"3",column:"50",placeholder:"Saisissez le contenu","onUpdate:modelValue":i[2]||(i[2]=_=>a.value=_),onKeyup:i[3]||(i[3]=_=>c(a.value))},null,544),[[S,a.value]]),!e.value.isTitleError&&!e.value.isContentError?(s(),o("button",K," Ajouter un article ")):(s(),o("button",U,[(s(!0),o(P,null,x(e.value.message,(_,E)=>(s(),o("span",{key:E},[w(v(_),1),q]))),128))]))],32))}},Q=h(G,[["__scopeId","data-v-96e7007d"]]);const R={key:2,class:"modale"},W=r("h3",null,"Articles sélectionnés",-1),X=["href"],Y={__name:"ModalItem",props:["nombrePosts","selectedPosts"],setup(t){const n=m(!1);function d(){n.value=!n.value}return(l,a)=>(s(),o("div",null,[n.value?(s(),o("button",{key:1,class:"modale-btn",onClick:d},"Fermer la fenêtre")):(s(),o("button",{key:0,class:"modale-btn",onClick:d},v(t.nombrePosts)+" article"+v(t.nombrePosts>1?"s":"")+" sélectionné"+v(t.nombrePosts>1?"s":""),1)),n.value?(s(),o("div",R,[W,(s(!0),o(P,null,x(t.selectedPosts,e=>(s(),o("a",{class:"selected-articles",key:e.id,href:`https://jsonplaceholder.typicode.com/posts/${e.id}`,target:"_blank"},v(e.title),9,X))),128))])):M("",!0)]))}};const Z=["onClick"],ee=["onClick"],te={__name:"PostsList",props:["posts","selectedPosts","postsStore"],setup(t){return(n,d)=>(s(),o("div",null,[(s(!0),o(P,null,x(t.posts,l=>(s(),o("article",{key:l.id},[r("h5",null,v(l.title),1),r("p",null,v(l.body),1),t.selectedPosts.filter(a=>a.id===l.id).length===0?(s(),o("button",{key:0,class:"selectionner",onClick:a=>t.postsStore.toggleSelection(l,a.target)}," Sélectionner ",8,Z)):(s(),o("button",{key:1,class:"deselectionner",onClick:a=>t.postsStore.toggleSelection(l,a.target)}," Désélectionner ",8,ee))]))),128))]))}},se=h(te,[["__scopeId","data-v-b5414640"]]),oe=J("PostsStore",{state:()=>({selectedPosts:[],posts:[]}),getters:{nbrePosts(){return this.selectedPosts.length}},actions:{toggleSelection(t,n){this.selectedPosts.includes(t,n)?this.selectedPosts.splice(this.selectedPosts.indexOf(t),1):this.selectedPosts.push(t)},async getPosts(){this.posts=await V.get("https://jsonplaceholder.typicode.com/posts").then(t=>this.posts=t.data).default}}});const ne=t=>(C("data-v-c4c89540"),t=t(),T(),t),le=ne(()=>r("h1",null,"JsonPlaceHolder",-1)),ie={key:0},ae={id:"loading"},re={key:1},ce={id:"form"},ue={__name:"JsonPlaceHolderView",setup(t){const n=oe(),d=n.selectedPosts,l=m([]),a=m(!1);n.getPosts();const e=new Promise(c=>{setTimeout(()=>{c(l.value=n.posts)},1e3)});A(()=>{a.value=!0,e.then(()=>{a.value=!1})});function y(c){let p=[];for(const i of c.value)p.push(Number(i.id));return Math.max(...p)+1}function b(c){c.title.length>1&&c.title.length>1&&l.value.splice(0,0,{title:c.title,id:y(l),body:c.body})}return(c,p)=>(s(),o(P,null,[le,a.value?(s(),o("section",ie,[r("div",ae,[f(O)])])):(s(),o("section",re,[r("div",ce,[f(Q,{onAdd:b})]),f(se,{posts:l.value,selectedPosts:g(d),postsStore:g(n)},null,8,["posts","selectedPosts","postsStore"]),f(Y,{nombrePosts:g(n).nbrePosts,selectedPosts:g(d)},null,8,["nombrePosts","selectedPosts"])]))],64))}},_e=h(ue,[["__scopeId","data-v-c4c89540"]]);export{_e as default};
